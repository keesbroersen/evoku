const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PV3trUzL.js","./j8J1k_JH.js","./entry.D0mbWMol.css","./DzOmJKtI.js","./LP949riR.js"])))=>i.map(i=>d[i]);
import{ad as W,ae as D,_ as k}from"./j8J1k_JH.js";import{t as x}from"./DzOmJKtI.js";const w=(n,s)=>{const e=n._conditions;return e.length>0?`(${e.join(` ${s} `)})`:""},C=n=>{const s=[],e={_conditions:s,where(r,i,t){let a;switch(i.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(t)){const c=t.map(u=>S(u)).join(", ");a=`"${String(r)}" ${i.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${i} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(t)&&t.length===2)a=`"${String(r)}" ${i.toUpperCase()} ${S(t[0])} AND ${S(t[1])}`;else throw new Error(`Value for ${i} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":a=`"${String(r)}" ${i.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":a=`"${String(r)}" ${i.toUpperCase()} ${S(t)}`;break;default:a=`"${String(r)}" ${i} ${S(typeof t=="boolean"?Number(t):t)}`}return s.push(`${a}`),e},andWhere(r){const i=r(C());return s.push(w(i,"AND")),e},orWhere(r){const i=r(C());return s.push(w(i,"OR")),e}};return e},B=(n,s)=>{const e={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},r={__params:e,andWhere(t){const a=t(C());return e.conditions.push(w(a,"AND")),r},orWhere(t){const a=t(C());return e.conditions.push(w(a,"OR")),r},path(t){return r.where("path","=",W(t))},skip(t){return e.offset=t,r},where(t,a,c){return r.andWhere(u=>u.where(String(t),a,c)),r},limit(t){return e.limit=t,r},select(...t){return t.length&&e.selectedFields.push(...t),r},order(t,a){return e.orderBy.push(`"${String(t)}" ${a}`),r},async all(){return s(n,i()).then(t=>t||[])},async first(){return s(n,i({limit:1})).then(t=>t[0]||null)},async count(t="*",a=!1){return s(n,i({count:{field:String(t),distinct:a}})).then(c=>c[0].count)}};function i(t={}){let a="SELECT ";if(t!=null&&t.count)a+=`COUNT(${t.count.distinct?"DISTINCT ":""}${t.count.field}) as count`;else{const u=Array.from(new Set(e.selectedFields));a+=u.length>0?u.map(f=>`"${String(f)}"`).join(", "):"*"}a+=` FROM ${x[String(n)]}`,e.conditions.length>0&&(a+=` WHERE ${e.conditions.join(" AND ")}`),e.orderBy.length>0?a+=` ORDER BY ${e.orderBy.join(", ")}`:a+=" ORDER BY stem ASC";const c=(t==null?void 0:t.limit)||e.limit;return c>0&&(e.offset>0?a+=` LIMIT ${c} OFFSET ${e.offset}`:a+=` LIMIT ${c}`),a}return r};function S(n){return`'${String(n).replace(/'/g,"''")}'`}const P=/\d/,F=["-","_","/","."];function q(n=""){if(!P.test(n))return n!==n.toLowerCase()}function j(n,s){const e=F,r=[];if(!n||typeof n!="string")return r;let i="",t,a;for(const c of n){const u=e.includes(c);if(u===!0){r.push(i),i="",t=void 0;continue}const f=q(c);if(a===!1){if(t===!1&&f===!0){r.push(i),i=c,t=f;continue}if(t===!0&&f===!1&&i.length>1){const o=i.at(-1);r.push(i.slice(0,Math.max(0,i.length-1))),i=o+c,t=f;continue}}i+=c,t=f,a=u}return r.push(i),r}function M(n){return n?n[0].toUpperCase()+n.slice(1):""}function Q(n,s){return n?(Array.isArray(n)?n:j(n)).map(e=>M(s!=null&&s.normalize?e.toLowerCase():e)).join(""):""}function ee(n,s){return n?(Array.isArray(n)?n:j(n)).map(e=>e.toLowerCase()).join("-"):""}function _(n){return s=>(s=s||{},(n||[]).filter(e=>typeof s[e]<"u").reduce((e,r)=>Object.assign(e,{[r]:s[r]}),{}))}async function V(n,s=[]){var f;const e=n.__params;(f=e==null?void 0:e.orderBy)!=null&&f.length||(n=n.order("stem","ASC"));const r=await n.orWhere(o=>o.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...s||[]).all(),{contents:i,configs:t}=r.reduce((o,h)=>{var p;if(String(h.stem).split("/").pop()===".navigation"){h.title=((p=h.title)==null?void 0:p.toLowerCase())==="navigation"?"":h.title;const y=h.path.split("/").slice(0,-1).join("/")||"/";o.configs[y]={...h,...h.body}}else o.contents.push(h);return o},{configs:{},contents:[]}),a=o=>({..._(["title",...s])(o),...o.meta,...L(o==null?void 0:o.navigation)?o.navigation:{}}),c=o=>({..._(["title",...s])(o),...L(o==null?void 0:o.navigation)?o.navigation:{}}),u=i.reduce((o,h)=>{var T;const p=h.path.substring(1).split("/"),y=h.stem.split("/"),v=!!((T=y[y.length-1])!=null&&T.match(/([1-9]\d*\.)?index/g)),A=l=>({title:l.title,path:l.path,stem:l.stem,children:[],...c(l)}),d=A(h);if(v){const l=t[d.path];if(typeof(l==null?void 0:l.navigation)<"u"&&(l==null?void 0:l.navigation)===!1)return o;if(h.path!=="/"){const g=A(h);d.children.push(g)}l&&Object.assign(d,a(l))}if(p.length===1){const l=o.find(g=>g.path===d.path&&g.page===!1);return v&&l?Object.assign(l,{page:void 0,children:[...d.children||[],...l.children||[]]}):o.push(d),o}const E=p.slice(0,-1).reduce((l,g,O)=>{const N="/"+p.slice(0,O+1).join("/"),m=t[N];if(typeof(m==null?void 0:m.navigation)<"u"&&m.navigation===!1)return[];let $=l.find(b=>b.path===N);if(!$){const b=m?a(m):{};$={...b,title:b.title||G(g),path:N,stem:y.slice(0,O+1).join("/"),children:[],page:!1},l.push($)}return $.children},o),I=E.find(l=>l.path===d.path&&l.page===!1);return I?Object.assign(I,{...d,page:void 0,children:[...d.children||[],...I.children||[]]}):E.push(d),o},[]);return U(u)}function U(n){var e;const s=n;for(const r of s)(e=r.children)!=null&&e.length?U(r.children):delete r.children;return n}function L(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}const G=n=>n.split(/[\s-]/g).map(Q).join(" ");async function H(n,s,e){const{before:r=1,after:i=1,fields:t=[]}=e||{},a=await V(n,t),c=R(a),u=c.findIndex(h=>h.path===s),f=u===-1?[]:c.slice(u-r,u),o=u===-1?[]:c.slice(u+1,u+i+1);return[...Array.from({length:r}).fill(null).concat(f).slice(f.length),...o.concat(Array.from({length:i}).fill(null)).slice(0,i)]}function R(n){return n.flatMap(e=>{const r=e.children?R(e.children):[];return e.page===!1||r.length&&r.find(i=>i.path===e.path)?r:[{...e,children:void 0},...r]})}const K=n=>{var e,r;const s=(r=(e=D())==null?void 0:e.ssrContext)==null?void 0:r.event;return B(n,(i,t)=>Y(s,i,t))};function te(n,s,e){return J(n,r=>H(r,s,e))}async function Y(n,s,e){return z(s,e)}async function z(n,s){return await k(()=>import("./PV3trUzL.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(r=>r.loadDatabaseAdapter(n)).then(r=>r.all(s))}function J(n,s){const e=K(n),r={where(i,t,a){return e.where(String(i),t,a),r},andWhere(i){return e.andWhere(i),r},orWhere(i){return e.orWhere(i),r},order(i,t){return e.order(String(i),t),r},then(i,t){return s(e).then(i,t)},catch(i){return this.then(void 0,i)},finally(i){return this.then(void 0,void 0).finally(i)},get[Symbol.toStringTag](){return"Promise"}};return r}export{te as a,ee as k,Q as p,K as q};
